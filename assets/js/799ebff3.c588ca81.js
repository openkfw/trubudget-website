"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[37295],{3905:(e,t,n)=>{n.d(t,{Zo:()=>s,kt:()=>v});var r=n(67294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var u=r.createContext({}),d=function(e){var t=r.useContext(u),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},s=function(e){var t=d(e.components);return r.createElement(u.Provider,{value:t},e.children)},p="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var n=e.components,o=e.mdxType,a=e.originalType,u=e.parentName,s=l(e,["components","mdxType","originalType","parentName"]),p=d(n),m=o,v=p["".concat(u,".").concat(m)]||p[m]||c[m]||a;return n?r.createElement(v,i(i({ref:t},s),{},{components:n})):r.createElement(v,i({ref:t},s))}));function v(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=n.length,i=new Array(a);i[0]=m;var l={};for(var u in t)hasOwnProperty.call(t,u)&&(l[u]=t[u]);l.originalType=e,l[p]="string"==typeof e?e:o,i[1]=l;for(var d=2;d<a;d++)i[d]=n[d];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}m.displayName="MDXCreateElement"},22914:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>u,contentTitle:()=>i,default:()=>c,frontMatter:()=>a,metadata:()=>l,toc:()=>d});var r=n(87462),o=(n(67294),n(3905));const a={sidebar_position:1,sidebar_label:"Introduction"},i="TruBudget-API",l={unversionedId:"developer/api-docs/README",id:"developer/api-docs/README",title:"TruBudget-API",description:"Api Code Documentation / Exports",source:"@site/docs/developer/api-docs/README.md",sourceDirName:"developer/api-docs",slug:"/developer/api-docs/",permalink:"/docs/developer/api-docs/",draft:!1,editUrl:"https://github.com/facebook/docusaurus/edit/master/website/docs/developer/api-docs/README.md",tags:[],version:"current",lastUpdatedBy:"egdmrsy",lastUpdatedAt:1687938884,formattedLastUpdatedAt:"Jun 28, 2023",sidebarPosition:1,frontMatter:{sidebar_position:1,sidebar_label:"Introduction"},sidebar:"tutorialSidebar",previous:{title:"How to write documentation for TruBudget",permalink:"/docs/developer/documentation"},next:{title:"Table of Contents",permalink:"/docs/developer/api-docs/modules"}},u={},d=[{value:"Setup",id:"setup",level:2},{value:"Development",id:"development",level:3},{value:"Get started",id:"get-started",level:4},{value:"Run tests",id:"run-tests",level:4},{value:"Build a container",id:"build-a-container",level:4},{value:"Code Structure",id:"code-structure",level:4},{value:"API Swagger documentation",id:"api-swagger-documentation",level:3},{value:"API code documentation",id:"api-code-documentation",level:3},{value:"Environment Variables",id:"environment-variables",level:2}],s={toc:d},p="wrapper";function c(e){let{components:t,...n}=e;return(0,o.kt)(p,(0,r.Z)({},s,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"trubudget-api"},"TruBudget-API"),(0,o.kt)("p",null,"Api Code Documentation / ",(0,o.kt)("a",{parentName:"p",href:"modules"},"Exports")),(0,o.kt)("h2",{id:"setup"},"Setup"),(0,o.kt)("h3",{id:"development"},"Development"),(0,o.kt)("p",null,"Check out our ",(0,o.kt)("a",{parentName:"p",href:"../doc/adr/"},"ADRs")," to learn about our current way of doing things."),(0,o.kt)("h4",{id:"get-started"},"Get started"),(0,o.kt)("p",null,"Before starting the API, environment variables have to be set under ",(0,o.kt)("inlineCode",{parentName:"p"},".env")," file. The ",(0,o.kt)("inlineCode",{parentName:"p"},".env_example")," file provides the default/example values for the environment variables. Just make a copy of example file via:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"cp .env_example .env\n")),(0,o.kt)("p",null,"Default values are usually enough to setup a working local Trubudget instance. However you are free to change the variable values under .env file."),(0,o.kt)("p",null,"When not yet provisioned, it's recommended to start the server directly with node:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"npm run tsc && npm start\n")),(0,o.kt)("p",null,"After that, live-reloading doesn't hinder provisioning anymore, plus it's quite convenient, so you might want to use this instead:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"npm run dev\n")),(0,o.kt)("h4",{id:"run-tests"},"Run tests"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"npm test\n")),(0,o.kt)("h4",{id:"build-a-container"},"Build a container"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"docker build .\n")),(0,o.kt)("h4",{id:"code-structure"},"Code Structure"),(0,o.kt)("p",null,"In the ",(0,o.kt)("a",{parentName:"p",href:"./src/README"},"README")," under source folder, you can find information about the best practices, code structure and layout for the api."),(0,o.kt)("h3",{id:"api-swagger-documentation"},"API Swagger documentation"),(0,o.kt)("p",null,"The documentation is hosted by the API itself. Assuming it's running on your local machine on port 8080, you should see it at ",(0,o.kt)("a",{parentName:"p",href:"http://localhost:8080/api/documentation"},"localhost:8080/api/documentation"),"."),(0,o.kt)("h3",{id:"api-code-documentation"},"API code documentation"),(0,o.kt)("p",null,"For code documentation the API is using ",(0,o.kt)("a",{parentName:"p",href:"https://typedoc.org"},"TypeDoc"),".\nTo generate the documentation in ",(0,o.kt)("inlineCode",{parentName:"p"},"docs/developer/api-docs")," use following commands:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"cd api\nnpm install\nnpm run build-docs\n")),(0,o.kt)("p",null,"After executing the above commands the ",(0,o.kt)("inlineCode",{parentName:"p"},"api-docs")," folder is create in ",(0,o.kt)("inlineCode",{parentName:"p"},"docs/developer/api-docs"),"\nThis folder is used by the project ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/openkfw/trubudget-website"},"trubudget-website")," to show all documented functions of TruBudget's API.\nTo check out how it looks like in production checkout ",(0,o.kt)("a",{parentName:"p",href:"https://trubudget.net/docs/developer/api-docs/modules/"},"trubudget.net"),".\nTo locally spin up the trubudget-website with the build-docs folder copy the ",(0,o.kt)("inlineCode",{parentName:"p"},"build-docs")," folder into ",(0,o.kt)("inlineCode",{parentName:"p"},"trubudget-website/docs/developer/")," before starting the website locally with ",(0,o.kt)("inlineCode",{parentName:"p"},"npm start"),"."),(0,o.kt)("p",null,"Currently only domain layer functions are documented. If ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/openkfw/TruBudget/issues/1164"},"#1164")," is resolved the entire api will be documented."),(0,o.kt)("h2",{id:"environment-variables"},"Environment Variables"),(0,o.kt)("p",null,"In TruBudget, we use different environment variables to set credentials as well as configurations of the TruBudget services. The environment variables used in the API can be seen here ",(0,o.kt)("a",{parentName:"p",href:"./environment-variables"},"Environment Variables")))}c.isMDXComponent=!0}}]);