"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[7756],{46303:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>c,default:()=>a,frontMatter:()=>d,metadata:()=>i,toc:()=>o});const i=JSON.parse('{"id":"environment-variables/email-notification-service-environment-variables","title":"Trubudget Email Service","description":"Environment Variables","source":"@site/docs/environment-variables/email-notification-service-environment-variables.md","sourceDirName":"environment-variables","slug":"/environment-variables/email-notification-service-environment-variables","permalink":"/docs/environment-variables/email-notification-service-environment-variables","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/edit/master/website/docs/environment-variables/email-notification-service-environment-variables.md","tags":[],"version":"current","lastUpdatedBy":"Peter Baus","lastUpdatedAt":1734439313000,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Trubudget Blockchain","permalink":"/docs/environment-variables/blockchain-environment-variables"},"next":{"title":"Trubudget Email Service","permalink":"/docs/environment-variables/excel-export-service-environment-variables"}}');var s=t(74848),r=t(28453);const d={},c="Trubudget Email Service",l={},o=[{value:"Environment Variables",id:"environment-variables",level:2},{value:"JWT_SECRET",id:"jwt_secret",level:4}];function h(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h4:"h4",header:"header",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"trubudget-email-service",children:"Trubudget Email Service"})}),"\n",(0,s.jsx)(n.h2,{id:"environment-variables",children:"Environment Variables"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Env Variable name"}),(0,s.jsx)(n.th,{children:"Required"}),(0,s.jsx)(n.th,{children:"Default Value"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"AUTHENTICATION"})}),(0,s.jsx)(n.td,{children:"no"}),(0,s.jsx)(n.td,{children:"jwt"}),(0,s.jsx)(n.td,{children:"If set to none, no JWT-Token is required for all endpoints. If set JWT, a JWT token is necessary."})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"PORT"})}),(0,s.jsx)(n.td,{children:"no"}),(0,s.jsx)(n.td,{children:"8890"}),(0,s.jsx)(n.td,{children:"The port used to expose the email-notification service. Value is a port with minimal value 0 and maximal value 65535"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"DB_TYPE"})}),(0,s.jsx)(n.td,{children:"no"}),(0,s.jsx)(n.td,{children:"pg"}),(0,s.jsxs)(n.td,{children:["Type of database. A currently supported list can be found in the ",(0,s.jsx)(n.a,{href:"#database-configuration",children:"Database Configuration section"}),"."]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"DB_USER"})}),(0,s.jsx)(n.td,{children:"no"}),(0,s.jsx)(n.td,{children:"postgres"}),(0,s.jsx)(n.td,{children:"User name for connected database."})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"DB_PASSWORD"})}),(0,s.jsx)(n.td,{children:"no"}),(0,s.jsx)(n.td,{children:"test"}),(0,s.jsx)(n.td,{children:"Password for connected database."})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"DB_HOST"})}),(0,s.jsx)(n.td,{children:"no"}),(0,s.jsx)(n.td,{children:"localhost"}),(0,s.jsx)(n.td,{children:"IP/host of connected database."})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"DB_NAME"})}),(0,s.jsx)(n.td,{children:"no"}),(0,s.jsx)(n.td,{children:"trubudget_email_service"}),(0,s.jsx)(n.td,{children:"Name of the database."})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"DB_PORT"})}),(0,s.jsx)(n.td,{children:"no"}),(0,s.jsx)(n.td,{children:"5432"}),(0,s.jsx)(n.td,{children:"Port of connected database. Value is a port with minimal value 0 and maximal value 65535"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"DB_SSL"})}),(0,s.jsx)(n.td,{children:"no"}),(0,s.jsx)(n.td,{children:"-"}),(0,s.jsx)(n.td,{children:"If true the DB connection is using the SSL protocol"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"DB_SCHEMA"})}),(0,s.jsx)(n.td,{children:"no"}),(0,s.jsx)(n.td,{children:"public"}),(0,s.jsx)(n.td,{children:"Schema of connected database"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"SQL_DEBUG"})}),(0,s.jsx)(n.td,{children:"no"}),(0,s.jsx)(n.td,{children:"-"}),(0,s.jsx)(n.td,{children:"The SQL Debug option is forwarded to the knex configuration."})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"USER_TABLE"})}),(0,s.jsx)(n.td,{children:"no"}),(0,s.jsx)(n.td,{children:"users"}),(0,s.jsx)(n.td,{children:"Name of the table which is created if the first email address is inserted."})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"SMTP_HOST"})}),(0,s.jsx)(n.td,{children:"no"}),(0,s.jsx)(n.td,{children:"localhost"}),(0,s.jsx)(n.td,{children:"IP/host of external SMTP-Server used to actually send notification emails."})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"SMTP_PORT"})}),(0,s.jsx)(n.td,{children:"no"}),(0,s.jsx)(n.td,{children:"2500"}),(0,s.jsx)(n.td,{children:"Port of external SMTP-Server. Value is a port with minimal value 0 and maximal value 65535"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"SMTP_SSL"})}),(0,s.jsx)(n.td,{children:"no"}),(0,s.jsx)(n.td,{children:"-"}),(0,s.jsx)(n.td,{children:"If true the external SMTP-Server connection is using the SSL protocol."})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"SMTP_USER"})}),(0,s.jsx)(n.td,{children:"no"}),(0,s.jsx)(n.td,{children:"-"}),(0,s.jsx)(n.td,{children:"This is forwarded to the auth prop of the nodemailer's transport-options, to authenticate with the credentials of the configured SMTP server."})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"SMTP_PASSWORD"})}),(0,s.jsx)(n.td,{children:"no"}),(0,s.jsx)(n.td,{children:"-"}),(0,s.jsx)(n.td,{children:"Password of external SMTP-Server used to actually send notification emails."})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"EMAIL_FROM"})}),(0,s.jsx)(n.td,{children:"yes"}),(0,s.jsx)(n.td,{children:"-"}),(0,s.jsxs)(n.td,{children:["This is injected into the ",(0,s.jsx)(n.code,{children:"from"})," field of the email notification."]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"EMAIL_SUBJECT"})}),(0,s.jsx)(n.td,{children:"no"}),(0,s.jsx)(n.td,{children:"Trubudget Notification"}),(0,s.jsxs)(n.td,{children:["This is injected into the ",(0,s.jsx)(n.code,{children:"subject"})," field of the email notification."]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"EMAIL_TEXT"})}),(0,s.jsx)(n.td,{children:"no"}),(0,s.jsx)(n.td,{children:"You have received a notification."}),(0,s.jsxs)(n.td,{children:["This is injected into the ",(0,s.jsx)(n.code,{children:"body"})," of the email notification."]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"ACCESS_CONTROL_ALLOW_ORIGIN"})}),(0,s.jsx)(n.td,{children:"no"}),(0,s.jsx)(n.td,{children:"*"}),(0,s.jsxs)(n.td,{children:["Since the service uses CORS, the domain by which it can be called needs to be set. Setting this value to ",(0,s.jsx)(n.code,{children:"*"})," means that it can be called from any domain. Read more about this topic ",(0,s.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS",children:"here"}),"."]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"RATE_LIMIT"})}),(0,s.jsx)(n.td,{children:"no"}),(0,s.jsx)(n.td,{children:"-"}),(0,s.jsx)(n.td,{children:"Defines the limit each IP to RATE_LIMIT requests per windowMs (1 minute)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"JWT_SECRET"})}),(0,s.jsx)(n.td,{children:"yes (if JWT_ALGORITM=HS256)"}),(0,s.jsx)(n.td,{children:"-"}),(0,s.jsxs)(n.td,{children:["If JWT_ALGORITHM is set to ",(0,s.jsx)(n.code,{children:"HS256"}),", this is required and holds a secret to verify API-issued JWTs, with 32 length. If JWT_ALGORITHM is ",(0,s.jsx)(n.code,{children:"RS256"}),", leave blank."]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"JWT_ALGORITHM"})}),(0,s.jsx)(n.td,{children:"no"}),(0,s.jsx)(n.td,{children:"HS256"}),(0,s.jsxs)(n.td,{children:["Algorithm used for signing and verifying JWTs. Currently ",(0,s.jsx)(n.code,{children:"HS256"})," or ",(0,s.jsx)(n.code,{children:"RS256"})," are supported."]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"JWT_PUBLIC_KEY"})}),(0,s.jsx)(n.td,{children:"yes (if JWT_ALGORITHM=RS256)"}),(0,s.jsx)(n.td,{children:"-"}),(0,s.jsxs)(n.td,{children:["If JWT_ALGORITHM is set to ",(0,s.jsx)(n.code,{children:"RS256"}),", this is required and holds BASE64 encoded PEM encoded public key for RSA."]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"LOG_LEVEL"})}),(0,s.jsx)(n.td,{children:"no"}),(0,s.jsx)(n.td,{children:"info"}),(0,s.jsx)(n.td,{children:"Defines the log output."})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"PRETTY_PRINT"})}),(0,s.jsx)(n.td,{children:"no"}),(0,s.jsx)(n.td,{children:"-"}),(0,s.jsx)(n.td,{children:"If true the log output is pretty printed."})]})]})]}),"\n",(0,s.jsx)(n.h4,{id:"jwt_secret",children:"JWT_SECRET"}),"\n",(0,s.jsx)(n.p,{children:"The JWT_SECRET is shared between Trubudget's blockchain api and email-service. The endpoints of the email-service can\nonly be used by providing a valid JWT_TOKEN signed with this JWT_SECRET. Since the blockchain is using the notification\nendpoints and the ui is using the user endpoints the secret has to be shared."})]})}function a(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>d,x:()=>c});var i=t(96540);const s={},r=i.createContext(s);function d(e){const n=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:d(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);