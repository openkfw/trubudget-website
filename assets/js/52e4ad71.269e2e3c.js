"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[23655],{3905:(e,n,t)=>{t.d(n,{Zo:()=>d,kt:()=>f});var o=t(67294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function r(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function s(e,n){if(null==e)return{};var t,o,a=function(e,n){if(null==e)return{};var t,o,a={},i=Object.keys(e);for(o=0;o<i.length;o++)t=i[o],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)t=i[o],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var l=o.createContext({}),c=function(e){var n=o.useContext(l),t=n;return e&&(t="function"==typeof e?e(n):r(r({},n),e)),t},d=function(e){var n=c(e.components);return o.createElement(l.Provider,{value:n},e.children)},p="mdxType",u={inlineCode:"code",wrapper:function(e){var n=e.children;return o.createElement(o.Fragment,{},n)}},h=o.forwardRef((function(e,n){var t=e.components,a=e.mdxType,i=e.originalType,l=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),p=c(t),h=a,f=p["".concat(l,".").concat(h)]||p[h]||u[h]||i;return t?o.createElement(f,r(r({ref:n},d),{},{components:t})):o.createElement(f,r({ref:n},d))}));function f(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var i=t.length,r=new Array(i);r[0]=h;var s={};for(var l in n)hasOwnProperty.call(n,l)&&(s[l]=n[l]);s.originalType=e,s[p]="string"==typeof e?e:a,r[1]=s;for(var c=2;c<i;c++)r[c]=t[c];return o.createElement.apply(null,r)}return o.createElement.apply(null,t)}h.displayName="MDXCreateElement"},17857:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>r,default:()=>u,frontMatter:()=>i,metadata:()=>s,toc:()=>c});var o=t(87462),a=(t(67294),t(3905));const i={},r="Connection Process",s={unversionedId:"operation-administration/installation/connect-to-an-existing-network/connection-process",id:"operation-administration/installation/connect-to-an-existing-network/connection-process",title:"Connection Process",description:"This section describes how the process of joining a new TruBudget network works in detail.",source:"@site/docs/operation-administration/installation/connect-to-an-existing-network/connection-process.md",sourceDirName:"operation-administration/installation/connect-to-an-existing-network",slug:"/operation-administration/installation/connect-to-an-existing-network/connection-process",permalink:"/docs/operation-administration/installation/connect-to-an-existing-network/connection-process",draft:!1,editUrl:"https://github.com/facebook/docusaurus/edit/master/website/docs/operation-administration/installation/connect-to-an-existing-network/connection-process.md",tags:[],version:"current",lastUpdatedBy:"Georgia Moldovan",lastUpdatedAt:1697196098,formattedLastUpdatedAt:"Oct 13, 2023",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Connect to an existing Blockchain network on Machine",permalink:"/docs/operation-administration/installation/connect-to-an-existing-network/bare-metal"},next:{title:"Connect to an existing Blockchain network using docker",permalink:"/docs/operation-administration/installation/connect-to-an-existing-network/docker"}},l={},c=[{value:"Table of Contents",id:"table-of-contents",level:2},{value:"Alpha vs Beta Node",id:"alpha-vs-beta-node",level:2},{value:"Alpha node configuration",id:"alpha-node-configuration",level:3},{value:"Beta node configuration",id:"beta-node-configuration",level:3},{value:"Connect as new organization",id:"connect-as-new-organization",level:2},{value:"Connect as new node of an existing organization",id:"connect-as-new-node-of-an-existing-organization",level:2},{value:"API network endpoints",id:"api-network-endpoints",level:2},{value:"Connection process via REST API",id:"connection-process-via-rest-api",level:3}],d={toc:c},p="wrapper";function u(e){let{components:n,...i}=e;return(0,a.kt)(p,(0,o.Z)({},d,i,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"connection-process"},"Connection Process"),(0,a.kt)("p",null,"This section describes how the process of joining a new TruBudget network works in detail."),(0,a.kt)("p",null,"The minimum components needed are an alpha node connected to an API and a beta node which wants to join the network of the alpha node."),(0,a.kt)("h2",{id:"table-of-contents"},"Table of Contents"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#connection-process"},"Connection Process"),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#table-of-contents"},"Table of Contents")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#alpha-vs-beta-node"},"Alpha vs Beta Node"),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#alpha-node-configuration"},"Alpha node configuration")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#beta-node-configuration"},"Beta node configuration")))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#connect-as-new-organization"},"Connect as new organization")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#connect-as-new-node-of-an-existing-organization"},"Connect as new node of an existing organization")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#api-network-endpoints"},"API network endpoints"),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#connection-process-via-rest-api"},"Connection process via REST API"))))))),(0,a.kt)("h2",{id:"alpha-vs-beta-node"},"Alpha vs Beta Node"),(0,a.kt)("p",null,"The first node of a TruBudget network is called ",(0,a.kt)("inlineCode",{parentName:"p"},"alpha node"),". Every node after the first one is called ",(0,a.kt)("inlineCode",{parentName:"p"},"beta node"),"\nA blockchain node defines itself as ",(0,a.kt)("inlineCode",{parentName:"p"},"beta node")," if the environment variable ",(0,a.kt)("inlineCode",{parentName:"p"},"P2P_HOST")," is set."),(0,a.kt)("h3",{id:"alpha-node-configuration"},"Alpha node configuration"),(0,a.kt)("p",null,"If a TruBudget alpha node is setup and beta nodes should connect to it in the future additional configurations must be made:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"The node must be accessible to beta nodes via ",(0,a.kt)("inlineCode",{parentName:"li"},"[EXTERNAL_IP]:[P2P_PORT]"),"."),(0,a.kt)("li",{parentName:"ul"},"The API connected to the node must be accessible to beta nodes.")),(0,a.kt)("p",null,":::hint\nAfter setting the ",(0,a.kt)("inlineCode",{parentName:"p"},"EXTERNAL_IP")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"P2P_PORT")," (default: 7447) and after starting the node check if the port is open with a TCP check tool of your choice\n:::"),(0,a.kt)("h3",{id:"beta-node-configuration"},"Beta node configuration"),(0,a.kt)("p",null,"If a TruBudget beta node is setup additional configurations must be made:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"The P2P_HOST must be set to the EXTERNAL_IP of the alpha node"),(0,a.kt)("li",{parentName:"ul"},"The P2P_PORT must be the same of the alpha node"),(0,a.kt)("li",{parentName:"ul"},"The API_HOST and API_PORT must be set to the API of the alpha node"),(0,a.kt)("li",{parentName:"ul"},"The MULTICHAIN_RPC_PASSWORD must be the one of the TruBudget network")),(0,a.kt)("p",null,":::hint\nIt is also possible to connect a beta node to a beta node, just make sure the additional configurations of the ",(0,a.kt)("a",{parentName:"p",href:"#alpha-node-configuration"},"alpha node configuration section")," are set\n:::"),(0,a.kt)("h2",{id:"connect-as-new-organization"},"Connect as new organization"),(0,a.kt)("p",null,"In this case, a new organization wants to join an already existing network. Example: Orga A already has one node in the network and Orga B wants to join."),(0,a.kt)("p",null,"A = Orga A\nB = Orga B (new organization)"),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"connection-process-new-orga-sequence-diagram",src:t(92857).Z,width:"2238",height:"1291"})),(0,a.kt)("h2",{id:"connect-as-new-node-of-an-existing-organization"},"Connect as new node of an existing organization"),(0,a.kt)("p",null,"In this case a new node from an organization that already has a node in the network wants to join. Example: Orga A has one node in the network and a new Orga A node wants to join the network.\nThe main difference here is, that you only need the approval of one admin user from another node in the network."),(0,a.kt)("p",null,"Important: Even though the new node of the organization has its own address, only the address and private key of the already existing node is used for future transactions. It is therefore absolutely necessary that both nodes have the same ORGANIZATION_VAULT_SECRET."),(0,a.kt)("p",null,"Node A = first node of Orga A\nNode A2 = second node of Orga A"),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"connection-process-existing-orga-sequence-diagram",src:t(76261).Z,width:"1374",height:"1104"})),(0,a.kt)("h2",{id:"api-network-endpoints"},"API network endpoints"),(0,a.kt)("p",null,"The connection process is done using the REST API network endpoints of TruBudget.\nThe description of all ",(0,a.kt)("inlineCode",{parentName:"p"},"network")," requests can be found in the Swagger documentation in every TruBudget API. If you setup the API locally, you can visit the Swagger documentation here:\nhttp://localhost:8080/api/documentation/static/index.html#/network"),(0,a.kt)("h3",{id:"connection-process-via-rest-api"},"Connection process via REST API"),(0,a.kt)("p",null,"A beta node sends a registration request (",(0,a.kt)("inlineCode",{parentName:"p"},"network.registerNode"),") to the alpha API automatically on startup.\nThe network must now vote for the new organization (",(0,a.kt)("inlineCode",{parentName:"p"},"network.voteForPermission"),").\nIf enough votes exists an organization can approve the beta node (",(0,a.kt)("inlineCode",{parentName:"p"},"network.approveNewOrganization"),").\nAfter successful approval the beta node can connect to the alpha note via Peer to Peer and synchronize its data."))}u.isMDXComponent=!0},76261:(e,n,t)=>{t.d(n,{Z:()=>o});const o=t.p+"assets/images/connection-process-existing-orga-sequence-diagram-a43cda3f032e10172a1a32a3837f9528.png"},92857:(e,n,t)=>{t.d(n,{Z:()=>o});const o=t.p+"assets/images/connection-process-new-orga-sequence-diagram-18b8c215d154bff44d5cde713258e45d.png"}}]);