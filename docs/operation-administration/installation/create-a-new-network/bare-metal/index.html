<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.3">
<title data-react-helmet="true">Create a new Network on a Machine | TruBudget</title><meta data-react-helmet="true" property="og:url" content="https://trubudget.net//docs/operation-administration/installation/create-a-new-network/bare-metal"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Create a new Network on a Machine | TruBudget"><meta data-react-helmet="true" name="description" content="It is highly recommended to use the Docker-Compose Setup guide instead of this Setup guide. Only use this guide if docker cannot be used"><meta data-react-helmet="true" property="og:description" content="It is highly recommended to use the Docker-Compose Setup guide instead of this Setup guide. Only use this guide if docker cannot be used"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://trubudget.net//docs/operation-administration/installation/create-a-new-network/bare-metal"><link data-react-helmet="true" rel="alternate" href="https://trubudget.net//docs/operation-administration/installation/create-a-new-network/bare-metal" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://trubudget.net//docs/operation-administration/installation/create-a-new-network/bare-metal" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.b7a89038.css">
<link rel="preload" href="/assets/js/runtime~main.9e2b9013.js" as="script">
<link rel="preload" href="/assets/js/main.105262f3.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><b class="navbar__title">TruBudget</b></a><a class="navbar__item navbar__link navbar__link--active" href="/docs/README">Documentation</a><a href="https://github.com/openkfw/TruBudget/discussions" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Community<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://taas.trubudget.net" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>TruBudget as a Service<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/openkfw/TruBudget" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle displayOnlyInLargeViewport_cxYs react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_iYfV">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_iYfV">ðŸŒž</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input type="search" id="search_input_react" placeholder="Loading..." aria-label="Search" class="navbar__search-input search-bar" disabled=""></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><b class="navbar__title">TruBudget</b></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link navbar__link--active" href="/docs/README">Documentation</a></li><li class="menu__list-item"><a href="https://github.com/openkfw/TruBudget/discussions" target="_blank" rel="noopener noreferrer" class="menu__link"><span>Community<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="menu__list-item"><a href="https://taas.trubudget.net" target="_blank" rel="noopener noreferrer" class="menu__link"><span>TruBudget as a Service<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="menu__list-item"><a href="https://github.com/openkfw/TruBudget" target="_blank" rel="noopener noreferrer" class="menu__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_lDyR"><aside class="docSidebarContainer_0YBq"><div class="sidebar_a3j0"><nav class="menu menu--responsive thin-scrollbar menu_cyFh menuWithAnnouncementBar_+O1J" aria-label="Sidebar navigation"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg class="sidebarMenuIcon_iZzd" width="24" height="24" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/README">Getting Started</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/usecases">Example Use Cases</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Developer</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/developer/introduction">Contributing to TruBudget</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/developer/developer-setup">Setup</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="-1">Architecture</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/developer/architecture/intro">Architecture Decision Records</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/developer/architecture/record-architecture-decisions">Record architecture decisions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/developer/architecture/access-control-model">Access Control Model</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/developer/architecture/project-data-model">Data model for projects</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/developer/architecture/ressource-level-lifetime">Resource-level lifetime</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/developer/architecture/workflowitem-ordering">Workflowitem-ordering</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/developer/architecture/multi-node-setup">Multi-node setup</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/developer/architecture/execution-architecture-overview">Basic architecture overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/developer/architecture/git-branching-model">Git Branching Model</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/developer/architecture/migration-model">Migration Model</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/developer/architecture/multi-node-setup-and-user-management">Multi node setup and user management</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/developer/architecture/decline-node">Decline Node Request</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/developer/architecture/node-connection-info">Node Status</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/developer/logging">Logging</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/developer/load-tests">Load and stress tests</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/developer/documentation">How to write documentation for TruBudget</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Operation / Administration</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/operation-administration/introduction">Introduction and Basics</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/operation-administration/security">Security @ TruBudget</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#" tabindex="0">Installation</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/operation-administration/installation/README">Introduction</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Connect to an existing network</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/operation-administration/installation/connect-to-an-existing-network/bare-metal">Connect to an existing Blockchain network on Machine</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/operation-administration/installation/connect-to-an-existing-network/connection-process">Connection Process</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/operation-administration/installation/connect-to-an-existing-network/docker">Connect to an existing Blockchain network using docker</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#" tabindex="0">Create a new network</a><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/operation-administration/installation/create-a-new-network/bare-metal">Create a new Network on a Machine</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/operation-administration/installation/create-a-new-network/docker">Create a new Network with Docker-Compose</a></li></ul></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/operation-administration/encryption">Securing communication between nodes</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/operation-administration/logging">Logging</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/operation-administration/multichain-cli">Multichain-Cli</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/operation-administration/update-trubudget">Updating TruBudget</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">User-Guide</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/user-guide/README">Introduction</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="-1">User and groups</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/user-guide/users-and-groups/user">User</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/user-guide/users-and-groups/group">Group</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/user-guide/users-and-groups/permissions">Permissions</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="-1">Project</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/user-guide/projects/project">Project</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/user-guide/projects/subproject">Subproject</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/user-guide/projects/workflowitem">Workflowitems</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="-1">Network</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/user-guide/network/nodes">Nodes</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="-1">Status</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/user-guide/status/status">Service-Status</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/user-guide/backup">Backup</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/user-guide/confirmation">Confirmation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/user-guide/excel-export">Excel Export</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/user-guide/notifications">Notifications</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Known Issues</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/known-issues/intro">Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/known-issues/local">Errors during Local Installation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/known-issues/dev">Issues during Developer Setup</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="/docs/environment-variables">Environment Variables</a></li></ul></nav></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><div class="markdown"><header><h1 class="h1Heading_dC7a">Create a new Network on a Machine</h1></header><p><strong>It is highly recommended to use the <a href="/docs/operation-administration/installation/create-a-new-network/docker">Docker-Compose Setup guide</a> instead of this Setup guide. Only use this guide if docker cannot be used</strong></p><p>This guide describes how to create a new network without the use of Docker, Docker-Compose.
Before starting make sure to have <code>node</code>,<code>npm</code> and the <a href="https://www.multichain.com/download-community/" target="_blank" rel="noopener noreferrer">latest release of MultiChain</a> available on your machine.
To check if all required tools are installed correctly use following check commands:</p><ul><li>node: <code>node -v</code></li><li>npm: <code>npm -v</code></li><li>multichain: <code>multichain-util</code> &amp; <code>multichaind</code></li></ul><p>If the above commands cannot be found make sure the tools are installed and the PATH variables are set correctly.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="table-of-contents"></a>Table of Contents<a class="hash-link" href="#table-of-contents" title="Direct link to heading">#</a></h2><ul><li><a href="#create-a-new-network-on-a-machine">Create a new Network on a Machine</a><ul><li><a href="#table-of-contents">Table of Contents</a></li><li><a href="#get-the-repository">Get the repository</a></li><li><a href="#blockchain">Blockchain</a></li><li><a href="#api">API</a></li><li><a href="#frontend">Frontend</a><ul><li><a href="#direct-connect">Direct Connect</a></li><li><a href="#reverse-proxy-nginx">Reverse Proxy (nginx)</a><ul><li><a href="#adding-a-trubudget-service-to-the-reverse-proxy">Adding a TruBudget Service to the reverse proxy</a></li></ul></li></ul></li><li><a href="#provisioning">Provisioning</a></li><li><a href="#excel-export-service">Excel-Export Service</a><ul><li><a href="#frontend-1">Frontend</a></li></ul></li><li><a href="#email-notification-service">Email-Notification Service</a><ul><li><a href="#service">Service</a></li><li><a href="#database">Database</a></li><li><a href="#smtp-server">SMTP-Server</a></li><li><a href="#frontend-2">Frontend</a></li><li><a href="#blockchain-1">Blockchain</a></li></ul></li><li><a href="#storage-service">Storage Service</a><ul><li><a href="#service-1">Service</a></li><li><a href="#storage">Storage</a></li><li><a href="#api-1">API</a></li></ul></li><li><a href="#log-rotation">Log-Rotation</a></li></ul></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="get-the-repository"></a>Get the repository<a class="hash-link" href="#get-the-repository" title="Direct link to heading">#</a></h2><p>Clone the Github repository of the components onto the designated machines.</p><p>Clone the repository:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">git clone https://github.com/openkfw/TruBudget.git</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">cd TruBudget</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>If you work with an existing checkout, make sure you have the latest changes:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">git pull</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="blockchain"></a>Blockchain<a class="hash-link" href="#blockchain" title="Direct link to heading">#</a></h2><p>Set the environment parameters listed below:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token builtin class-name" style="color:rgb(255, 203, 107)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">PORT</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">8085</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">P2P_PORT</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">7447</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">RPC_PORT</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">8000</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">RPC_USER</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;multichainrpc&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">RPC_PASSWORD</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;password&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">MULTICHAIN_DIR</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;/tmp&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">PRETTY_PRINT</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;true&quot;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>:::hint
Use absolute paths for environment variables.
If it&#x27;s not the first start and the <code>.multichain</code> folder exists already a multichain error will be shown in the logs but multichain will work as expected.
(Error while creating Multichain
err: &quot;ERROR: Blockchain parameter set was not generated.\n&quot; )
:::</p><p>Navigate into the <code>blockchain</code> directory, install the node packages defined in the <code>package.json</code> and start the blockchain using following lines:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token builtin class-name" style="color:rgb(255, 203, 107)">cd</span><span class="token plain"> blockchain/</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">npm</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">install</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">npm</span><span class="token plain"> start</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>:::hint
To run the process as background process use <code>npm start &gt; blockchain.log 2&gt;&amp;1 &amp;</code>, the blockchain.log contains the logs of the blockchain process
:::</p><p>If the logs are showing the line <code>Node ready</code> the node is setup correctly.
The blockchain can be checked by HTTP-Request <code>localhost:8085/version</code> using postman, curl or even a browser. The response is the current version of TruBudget&#x27;s blockchain.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="api"></a>API<a class="hash-link" href="#api" title="Direct link to heading">#</a></h2><p>Set the environment parameters listed below:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token builtin class-name" style="color:rgb(255, 203, 107)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">ORGANIZATION</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">MyOrga</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">P2P_PORT</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">7447</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">RPC_PORT</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">8000</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">PORT</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">8080</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">RPC_HOST</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">127.0</span><span class="token plain">.0.1</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">RPC_USER</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">multichainrpc</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">RPC_PASSWORD</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">password</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">ORGANIZATION_VAULT_SECRET</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">secret</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">ROOT_SECRET</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">root-secret</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">PRETTY_PRINT</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;true&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">NODE_ENV</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;development&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">JWT_SECRET</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;jwt-secret&quot;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Navigate into the <code>api</code> directory, install the node packages defined in the <code>package.json</code> and start the api using following lines:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token builtin class-name" style="color:rgb(255, 203, 107)">cd</span><span class="token plain"> api/</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">npm</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">install</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">npm</span><span class="token plain"> run build</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">npm</span><span class="token plain"> start</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>:::hint
To run the process as background process use <code>npm start &gt; api.log 2&gt;&amp;1 &amp;</code>, the api.log contains the logs of the api process
:::</p><p>If the logs are showing the line <code>Node 1ad358tnuTvQd9WpHQLPXmrYt9SeppiwPQNgNL registered</code> and <code>Keys successfully published</code> the api is setup correctly.
The api can be checked by HTTP-Request <code>localhost:8080/api/readiness</code> using postman, curl or even a browser. The response should be <code>OK</code>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="frontend"></a>Frontend<a class="hash-link" href="#frontend" title="Direct link to heading">#</a></h2><p>There are two ways of starting the frontend using different networking solutions:</p><ul><li>Direct connect</li><li>Reverse proxy (nginx)</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="direct-connect"></a>Direct Connect<a class="hash-link" href="#direct-connect" title="Direct link to heading">#</a></h3><p>The environment parameters <code>API_HOST</code> and <code>API_PORT</code> are not used by the frontend direct connect setup, to connect to the api the <code>package.json</code> has to be adapted.
Use the property <code>proxy</code> to pass the API connection &quot;proxy&quot;: &quot;http://API_HOST:API_PORT&quot;. (e.g. &quot;proxy&quot;: &quot;<a href="http://20.11.202.22:8080%22" target="_blank" rel="noopener noreferrer">http://20.11.202.22:8080&quot;</a>)</p><p>Navigate into the <code>frontend</code> directory, install the node packages defined in the <code>package.json</code> and start the frontend using following lines:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token builtin class-name" style="color:rgb(255, 203, 107)">cd</span><span class="token plain"> frontend/</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">npm</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">install</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">npm</span><span class="token plain"> start</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="reverse-proxy-nginx"></a>Reverse Proxy (nginx)<a class="hash-link" href="#reverse-proxy-nginx" title="Direct link to heading">#</a></h3><p>Make sure you have installed nginx on your machine: <a href="https://www.nginx.com/resources/wiki/start/topics/tutorials/install/" target="_blank" rel="noopener noreferrer">nginx installation</a></p><p>With following commands packages are installed, the frontend is built and copied into the folder of nginx, the nginx config is copied into your nginx installation and the frontend is started:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token builtin class-name" style="color:rgb(255, 203, 107)">cd</span><span class="token plain"> frontend/</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">npm</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">install</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">npm</span><span class="token plain"> run build</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">cp</span><span class="token plain"> -R build/* /usr/share/nginx/html</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">cp</span><span class="token plain"> nginx.conf /etc/nginx/conf.d/default.conf</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">/bin/bash configureServer.sh</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Nginx&#x27; configuration is all about the <code>default.conf</code> file which is dynamically adapted by <code>./frontend/configureServer.sh</code>.
If any configuration regarding nginx must be made e.g. ssl configuration start at our <code>default.conf</code> templates <code>nginx.conf</code>, <code>nginx-ssl.conf</code> or use nginx&#x27; example nginx.conf in their <a href="https://www.nginx.com/resources/wiki/start/topics/examples/full/#nginx-conf" target="_blank" rel="noopener noreferrer">official documentation</a></p><p>:::hint
Make sure that port 80 is available for nginx. This can be changed in the nginx.conf.
Check out <a href="https://github.com/openkfw/TruBudget/blob/master/frontend/configureServer.sh" target="_blank" rel="noopener noreferrer">configureServer.sh</a> to configure all proxy passes.
To run the process as background process use <code>/bin/bash configureServer.sh &gt; frontend.log 2&gt;&amp;1 &amp;</code>, the frontend.log contains the logs of the frontend process
:::</p><p>As soon as the step above is done, the frontend should be available on port 80 (default port of nginx in <code>default.conf</code>).
Additionally the api can be reached via nginx reverse proxy at <code>localhost/test/api/readiness</code></p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="adding-a-trubudget-service-to-the-reverse-proxy"></a>Adding a TruBudget Service to the reverse proxy<a class="hash-link" href="#adding-a-trubudget-service-to-the-reverse-proxy" title="Direct link to heading">#</a></h4><p>The configuration of the nginx proxy is done with <code>configureServer.sh</code> by using the same environment variables used in the rest of the bare-metal guide.
For e.g. the excel-export-service the environment list of the frontend must be applied to the shell where nginx proxy will be started.
Then the script <code>configureServer.sh</code> will adapt your <code>/etc/nginx/conf.d/default.conf</code> according to the environment variables set in the shell.
For detailed information check out the script <a href="https://github.com/openkfw/TruBudget/blob/master/frontend/configureServer.sh" target="_blank" rel="noopener noreferrer">configureServer.sh</a></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="provisioning"></a>Provisioning<a class="hash-link" href="#provisioning" title="Direct link to heading">#</a></h2><p>The Provisioning generates test-data via TruBudget&#x27;s API.</p><p>Set the environment parameters listed below:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token builtin class-name" style="color:rgb(255, 203, 107)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">API_PORT</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">8080</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">ORGANIZATION</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">MyOrga</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">ROOT_SECRET</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">root-secret</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">PRETTY_PRINT</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;true&quot;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Navigate into the <code>provisioning</code> directory, install the node packages defined in the <code>package.json</code> and start the provisioning using following lines:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token builtin class-name" style="color:rgb(255, 203, 107)">cd</span><span class="token plain"> provisioning/</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">npm</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">install</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">npm</span><span class="token plain"> start</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>:::hint
Make sure the api is started in development mode (NODE_ENV=development), otherwise the api validations won&#x27;t accept the user creation of the provisioning
To run the process as background process use <code>npm start &gt; provisioning.log 2&gt;&amp;1 &amp;</code>, the provisioning.log contains the logs of the provisioning process
:::</p><p>To test if the provisioning worked, login with credentials:</p><ul><li>username: mstein</li><li>password: test</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="excel-export-service"></a>Excel-Export Service<a class="hash-link" href="#excel-export-service" title="Direct link to heading">#</a></h2><p>Set the environment parameters listed below:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token builtin class-name" style="color:rgb(255, 203, 107)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">API_HOST</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">127.0</span><span class="token plain">.0.1</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">API_PORT</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">8080</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">PORT</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">8888</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">ACCESS_CONTROL_ALLOW_ORIGIN</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;*&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">PRETTY_PRINT</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;true&quot;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Navigate into the <code>excel-export-service</code> directory, install the node packages defined in the <code>package.json</code> and start the excel-export-service using following lines:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token builtin class-name" style="color:rgb(255, 203, 107)">cd</span><span class="token plain"> excel-export-service/</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">npm</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">install</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">npm</span><span class="token plain"> run build</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">npm</span><span class="token plain"> start</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>:::hint
To run the process as background process use <code>npm start &gt; excel-export.log 2&gt;&amp;1 &amp;</code>, the excel-export.log contains the logs of the excel-export process
:::</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="frontend-1"></a>Frontend<a class="hash-link" href="#frontend-1" title="Direct link to heading">#</a></h3><p>To enable the excel-export-service additional environment variables must be provided to the <code>frontend</code>.
Make sure the following lines adapt the environment of the frontend NOT the excel-export-service:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token builtin class-name" style="color:rgb(255, 203, 107)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">REACT_APP_EXPORT_SERVICE_ENABLED</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">true</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">EXPORT_HOST</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">localhost</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">EXPORT_PORT</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">8888</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>To test if the setup is working correctly, click the export button in Trubudget&#x27;s frontend. If the button doesn&#x27;t show up check all related environment variables again and try to re-login.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="email-notification-service"></a>Email-Notification Service<a class="hash-link" href="#email-notification-service" title="Direct link to heading">#</a></h2><p>The email-notification-service consists of two components:</p><ul><li>email-service - provides an API to insert/update/delete email data</li><li>database - provides a postgres database where email data can be stored</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="service"></a>Service<a class="hash-link" href="#service" title="Direct link to heading">#</a></h3><p>Set the environment parameters listed below:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token builtin class-name" style="color:rgb(255, 203, 107)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">PORT</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">8890</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">ACCESS_CONTROL_ALLOW_ORIGIN</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;*&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">PRETTY_PRINT</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;true&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">JWT_SECRET</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;jwt-secret&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">DB_TYPE</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;pg&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">DB_NAME</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;trubudget_email_service&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">DB_USER</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;postgres&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">DB_PASSWORD</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;test&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">DB_HOST</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;localhost&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">DB_PORT</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;5432&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Navigate into the <code>email-notification-service</code> directory, install the node packages defined in the <code>package.json</code> and start the email-notification-service using following lines:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token builtin class-name" style="color:rgb(255, 203, 107)">cd</span><span class="token plain"> email-notification-service/</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">npm</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">install</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">npm</span><span class="token plain"> run build</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">npm</span><span class="token plain"> start</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>:::hint
To run the process as background process use <code>npm start &gt; email-notification.log 2&gt;&amp;1 &amp;</code>, the email-notification.log contains the logs of the email-notification process
:::</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="database"></a>Database<a class="hash-link" href="#database" title="Direct link to heading">#</a></h3><p>For the email-notification-service a database is needed. In this section postgres is used. To create a postgres database follow a guide on <a href="https://www.postgresql.org/download/" target="_blank" rel="noopener noreferrer">postgres&#x27; official website</a>.
Make sure you install postgres create a user role and a database.
Provide the information to the email-service via environment variables.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="smtp-server"></a>SMTP-Server<a class="hash-link" href="#smtp-server" title="Direct link to heading">#</a></h3><p>To actually send emails a running SMTP-server must be connected to the email-service. To test the setup with a local test SMTP mock check and try out <a href="https://github.com/mailslurper/mailslurper" target="_blank" rel="noopener noreferrer">mailslurper</a>.
Use the <a href="/docs/environment-variables">environment variables</a> prefixed with SMTP of the email-service to connect the service to your SMTP-server.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="frontend-2"></a>Frontend<a class="hash-link" href="#frontend-2" title="Direct link to heading">#</a></h3><p>To enable the email-notification-service additional environment variables must be provided to the <code>frontend</code>.
Make sure the following lines adapt the environment of the frontend NOT the excel-export-service:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token builtin class-name" style="color:rgb(255, 203, 107)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">REACT_APP_EMAIL_SERVICE_ENABLED</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">true</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">EMAIL_HOST</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">localhost</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">EMAIL_PORT</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">8890</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="blockchain-1"></a>Blockchain<a class="hash-link" href="#blockchain-1" title="Direct link to heading">#</a></h3><p>To enable the email-notification-service additional environment variables must be provided to the <code>blockchain</code>.
Make sure the following lines adapt the environment of the blockchain NOT the excel-export-service:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token builtin class-name" style="color:rgb(255, 203, 107)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">EMAIL_SERVICE</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">ENABLED</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">EMAIL_HOST</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">localhost</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">EMAIL_PORT</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">8890</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">JWT_SECRET</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;jwt-secret&quot;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>:::hint
If the multichain-feed file hasn&#x27;t execute permissions already following warning will be displayed in the blockchain logs:
<code>feed: &quot;sh: 1: [Path-to-Trubudget]/TruBudget/blockchain/src/multichain-feed/multichain-feed: Permission denied\n&quot;</code>.
Grant the file execute permissions: <code>chmod +x [Path-to-Trubudget]/TruBudget/blockchain/src/multichain-feed/multichain-feed</code>
:::</p><p>To test if the setup is working correctly, open the side menu in Trubudget&#x27;s frontend and open the user&#x27;s profile by clicking the settings button next to the username.
In the profile setting dialog edit the email address of the user and check if the user can be inserted into your database.
If the email field doesn&#x27;t show up check all related environment variables again and try to re-login.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="storage-service"></a>Storage Service<a class="hash-link" href="#storage-service" title="Direct link to heading">#</a></h2><p>The storage-service consists of two components:</p><ul><li>storage-service - provides an API to insert/delete files</li><li>S3-storage - provides a S3 storage where files can be stored</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="service-1"></a>Service<a class="hash-link" href="#service-1" title="Direct link to heading">#</a></h3><p>Set the environment parameters listed below:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token builtin class-name" style="color:rgb(255, 203, 107)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">PRETTY_PRINT</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;true&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">ACCESS_CONTROL_ALLOW_ORIGIN</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;*&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">STORAGE_SERVICE_PORT</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">8090</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">MINIO_ACCESS_KEY</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;minio&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">MINIO_SECRET_KEY</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;minio123&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">MINIO_PORT</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">9000</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">MINIO_HOST</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;localhost&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">MINIO_BUCKET_NAME</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;trubudget&quot;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Navigate into the <code>storage-service</code> directory, install the node packages defined in the <code>package.json</code> and start the storage-service using following lines:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token builtin class-name" style="color:rgb(255, 203, 107)">cd</span><span class="token plain"> storage-service/</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">npm</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">install</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">npm</span><span class="token plain"> run build</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">npm</span><span class="token plain"> start</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>:::hint
To run the process as background process use <code>npm start &gt; email-notification.log 2&gt;&amp;1 &amp;</code>, the email-notification.log contains the logs of the email-notification process.
Without a running S3 storage the storage-service will throw errors constantly trying to connect to one.
:::</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="storage"></a>Storage<a class="hash-link" href="#storage" title="Direct link to heading">#</a></h3><p>We recommend to use Minio as S3 storage. To start Minio without docker we refer to their <a href="https://docs.min.io/docs/minio-quickstart-guide.html" target="_blank" rel="noopener noreferrer">official documentation</a>.
Provide the information to the storage-service via <a href="/docs/environment-variables">environment variables</a>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="api-1"></a>API<a class="hash-link" href="#api-1" title="Direct link to heading">#</a></h3><p>To enable the storage-service additional environment variables must be provided to the <code>api</code>.
Make sure the following lines adapt the environment of the api NOT the storage-service:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token builtin class-name" style="color:rgb(255, 203, 107)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">DOCUMENT_FEATURE_ENABLED</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">true</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">STORAGE_SERVICE_HOST</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">localhost</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">STORAGE_SERVICE_PORT</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">8090</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">STORAGE_SERVICE_EXTERNAL_URL</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;localhost:8090&quot;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>To test if the setup is working correctly, create a new workflowitem in Trubudget&#x27;s frontend and add a document during the creation process.
In minio usually available at <code>localhost:9000</code> the storage can be checked after login in with the MINIO_ACCESS_KEY and MINIO_SECRET_KEY.
If the document doesn&#x27;t show up at the minio dashboard check all related environment variables again.
The document-download can be checked via workflowitem info button.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="log-rotation"></a>Log-Rotation<a class="hash-link" href="#log-rotation" title="Direct link to heading">#</a></h2><p>As stated above in the hint sections, the logs can be printed to files like <code>api.log</code>. For operational purposes it is useful to have an application that manages the logs and takes care of log rotation (i.e. breaking the logs into smaller chunks). Luckily, there are several applications that are capable of doing exactly that. One of them is PM2, which we will describe here shortly.</p><p>PM2 is an application that handles node processes for you and restarts it after a crash. PM2 can be installed via the following command</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">npm</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">install</span><span class="token plain"> -g pm2</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>It offers a wide range of plugins called &quot;Modules&quot; that can be installed via PM2 directly. One of these modules is called &quot;pm2-logrotate&quot; which can be used to rotate logs (e.g. split them into chunks of certain size or create separate files for each day) and the command to install it is simply</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">pm2 </span><span class="token function" style="color:rgb(130, 170, 255)">install</span><span class="token plain"> pm2-logrotate</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>You can <a href="https://github.com/keymetrics/pm2-logrotate" target="_blank" rel="noopener noreferrer">set up</a> pm2-logrotate (if needed) with the following command</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">pm2 </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">set</span><span class="token plain"> pm2-logrotate:</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">param</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">value</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>e.g:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">pm2 </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">set</span><span class="token plain"> pm2-logrotate:max_size 1K </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">sets max. </span><span class="token function" style="color:rgb(130, 170, 255)">file</span><span class="token plain"> size to 1KB</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">pm2 </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">set</span><span class="token plain"> pm2-logrotate:compress </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">compresses logs when rotated</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">pm2 </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">set</span><span class="token plain"> pm2-logrotate:rotateInterval </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;*/1 * * * *&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">force rotate every minute, syntax similar to CRON</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token builtin class-name" style="color:rgb(255, 203, 107)">cd</span><span class="token plain"> api</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">pm2 start dist/index.js</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>This is just an example. Please refer to the <a href="http://pm2.keymetrics.io/" target="_blank" rel="noopener noreferrer">official documentation</a> for more information.</p></div><footer class="row docusaurus-mt-lg"><div class="col"><a href="https://github.com/facebook/docusaurus/edit/master/website/docs/operation-administration/installation/create-a-new-network/bare-metal.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_mS5F" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_wj+Z">Last updated on <b><time datetime="2022-06-20T11:37:59.000Z">6/20/2022</time></b> by <b>mayrmartin</b></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/operation-administration/installation/connect-to-an-existing-network/docker"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Connect to an existing Blockchain network using docker</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/operation-administration/installation/create-a-new-network/docker"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Create a new Network with Docker-Compose Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#table-of-contents" class="table-of-contents__link">Table of Contents</a></li><li><a href="#get-the-repository" class="table-of-contents__link">Get the repository</a></li><li><a href="#blockchain" class="table-of-contents__link">Blockchain</a></li><li><a href="#api" class="table-of-contents__link">API</a></li><li><a href="#frontend" class="table-of-contents__link">Frontend</a><ul><li><a href="#direct-connect" class="table-of-contents__link">Direct Connect</a></li><li><a href="#reverse-proxy-nginx" class="table-of-contents__link">Reverse Proxy (nginx)</a></li></ul></li><li><a href="#provisioning" class="table-of-contents__link">Provisioning</a></li><li><a href="#excel-export-service" class="table-of-contents__link">Excel-Export Service</a><ul><li><a href="#frontend-1" class="table-of-contents__link">Frontend</a></li></ul></li><li><a href="#email-notification-service" class="table-of-contents__link">Email-Notification Service</a><ul><li><a href="#service" class="table-of-contents__link">Service</a></li><li><a href="#database" class="table-of-contents__link">Database</a></li><li><a href="#smtp-server" class="table-of-contents__link">SMTP-Server</a></li><li><a href="#frontend-2" class="table-of-contents__link">Frontend</a></li><li><a href="#blockchain-1" class="table-of-contents__link">Blockchain</a></li></ul></li><li><a href="#storage-service" class="table-of-contents__link">Storage Service</a><ul><li><a href="#service-1" class="table-of-contents__link">Service</a></li><li><a href="#storage" class="table-of-contents__link">Storage</a></li><li><a href="#api-1" class="table-of-contents__link">API</a></li></ul></li><li><a href="#log-rotation" class="table-of-contents__link">Log-Rotation</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/README">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/openkfw/TruBudget/discussions" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Github Discussions<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/openkfw/TruBudget" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://taas.trubudget.net" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>TruBudget as a Service<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2022 TruBudget</div></div></div></footer></div>
<script src="/assets/js/runtime~main.9e2b9013.js"></script>
<script src="/assets/js/main.105262f3.js"></script>
</body>
</html>