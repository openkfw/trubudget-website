<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.3">
<title data-react-helmet="true">Create a New Network with Docker-Compose | TruBudget</title><meta data-react-helmet="true" property="og:url" content="https://trubudget.net//docs/operation-administration/installation/create-new-network/create-new-docker-compose"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Create a New Network with Docker-Compose | TruBudget"><meta data-react-helmet="true" name="description" content="This guide describes how to start a new instance of Trubudget using docker-compose."><meta data-react-helmet="true" property="og:description" content="This guide describes how to start a new instance of Trubudget using docker-compose."><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://trubudget.net//docs/operation-administration/installation/create-new-network/create-new-docker-compose"><link data-react-helmet="true" rel="alternate" href="https://trubudget.net//docs/operation-administration/installation/create-new-network/create-new-docker-compose" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://trubudget.net//docs/operation-administration/installation/create-new-network/create-new-docker-compose" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.b7a89038.css">
<link rel="preload" href="/assets/js/runtime~main.9f9b21c1.js" as="script">
<link rel="preload" href="/assets/js/main.be69de2d.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><b class="navbar__title">TruBudget</b></a><a class="navbar__item navbar__link navbar__link--active" href="/docs/README">Documentation</a><a href="https://github.com/openkfw/TruBudget/discussions" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Community<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://taas.trubudget.net" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>TruBudget as a Service<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/openkfw/TruBudget" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle displayOnlyInLargeViewport_cxYs react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_iYfV">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_iYfV">ðŸŒž</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input type="search" id="search_input_react" placeholder="Loading..." aria-label="Search" class="navbar__search-input search-bar" disabled=""></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><b class="navbar__title">TruBudget</b></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link navbar__link--active" href="/docs/README">Documentation</a></li><li class="menu__list-item"><a href="https://github.com/openkfw/TruBudget/discussions" target="_blank" rel="noopener noreferrer" class="menu__link"><span>Community<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="menu__list-item"><a href="https://taas.trubudget.net" target="_blank" rel="noopener noreferrer" class="menu__link"><span>TruBudget as a Service<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="menu__list-item"><a href="https://github.com/openkfw/TruBudget" target="_blank" rel="noopener noreferrer" class="menu__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_lDyR"><aside class="docSidebarContainer_0YBq"><div class="sidebar_a3j0"><nav class="menu menu--responsive thin-scrollbar menu_cyFh menuWithAnnouncementBar_+O1J" aria-label="Sidebar navigation"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg class="sidebarMenuIcon_iZzd" width="24" height="24" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/README">Getting Started</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/usecases">Example Use Cases</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Developer</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/developer/introduction">Contributing to TruBudget</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/developer/developer-setup">Setup</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="-1">Architecture</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/developer/architecture/intro">Architecture Decision Records</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/developer/architecture/record-architecture-decisions">Record architecture decisions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/developer/architecture/access-control-model">Access Control Model</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/developer/architecture/project-data-model">Data model for projects</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/developer/architecture/ressource-level-lifetime">Resource-level lifetime</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/developer/architecture/workflowitem-ordering">Workflowitem-ordering</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/developer/architecture/multi-node-setup">Multi-node setup</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/developer/architecture/execution-architecture-overview">Basic architecture overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/developer/architecture/git-branching-model">Git Branching Model</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/developer/architecture/migration-model">Migration Model</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/developer/architecture/multi-node-setup-and-user-management">Multi node setup and user management</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/developer/architecture/decline-node">Decline Node Request</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/developer/architecture/node-connection-info">Node Status</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/developer/logging">Logging</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/developer/load-tests">Load and stress tests</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/developer/documentation">How to write documentation for TruBudget</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Operation / Administration</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/operation-administration/introduction">Introduction and Basics</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/operation-administration/security">Security @ TruBudget</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#" tabindex="0">Installation</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/operation-administration/installation/README">Introduction</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Connect to an existing network</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/operation-administration/installation/connect-to-existing-node/bare-metal">Connect to an Existing Network on Bare Metal</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/operation-administration/installation/connect-to-existing-node/connect-docker-compose">Connect to an Existing Network using Docker</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#" tabindex="0">Create a new network</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/operation-administration/installation/create-new-network/bare-metal">Create a New Network Directly on Machine</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/operation-administration/installation/create-new-network/create-new-docker-compose">Create a New Network with Docker-Compose</a></li></ul></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/operation-administration/encryption">Securing communication between nodes</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/operation-administration/logging">Logging</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/operation-administration/multichain-cli">Multichain-Cli</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/operation-administration/update-trubudget">Updateing TruBudget</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">User-Guide</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/user-guide/README">Introduction</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="-1">User and groups</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/user-guide/users-and-groups/user">User</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/user-guide/users-and-groups/group">Group</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/user-guide/users-and-groups/permissions">Permissions</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="-1">Project</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/user-guide/projects/project">Project</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/user-guide/projects/subproject">Subproject</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/user-guide/projects/workflowitem">Workflowitems</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="-1">Network</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/user-guide/network/nodes">Nodes</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="-1">Status</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/user-guide/status/status">Service-Status</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/user-guide/backup">Backup</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/user-guide/confirmation">Confirmation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/user-guide/excel-export">Excel Export</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/user-guide/notifications">Notifications</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Known Issues</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/known-issues/intro">Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/known-issues/local">Errors during Local Installation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/known-issues/dev">Issues during Developer Setup</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="/docs/enviroment-variables">Environment Variables</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/environment-variables">Environment Variables</a></li></ul></nav></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><div class="markdown"><header><h1 class="h1Heading_dC7a">Create a New Network with Docker-Compose</h1></header><p>This guide describes how to start a new instance of Trubudget using docker-compose.</p><p>We distinguish between two types of deployments:</p><ul><li>The <strong>local</strong> deployment type which will create images from the code you have on your local machine and includes any changes you might have done</li><li>The <strong>master</strong> deployment type that will deploy Docker images out of the Docker Hub</li></ul><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>For the master deployment, you can use tags to specify the version you want to use</p></div></div><p>The deployments are abstracted through shell scripts. We expect you to have a UNIX-like operating system which can execute shell scripts, e.g. Ubuntu. If not, take a look at the scripts and port them according to your operating system.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="table-of-contents"></a>Table of Contents<a class="hash-link" href="#table-of-contents" title="Direct link to heading">#</a></h2><ul><li><a href="#create-a-new-network-with-docker-compose">Create a New Network with Docker-Compose</a><ul><li><a href="#table-of-contents">Table of Contents</a></li><li><a href="#prerequisites">Prerequisites</a><ul><li><a href="#docker--docker-compose">Docker &amp; Docker Compose</a></li><li><a href="#ports-and-ip-addresses-for-trubudget">Ports and IP Addresses for TruBudget</a></li><li><a href="#verify-version-of-trubudget">Verify version</a></li><li><a href="#clean-installation">Clean installation</a></li></ul></li><li><a href="#create-a-new-blockchain-network">Create a new Blockchain network</a></li><li><a href="#connect-to-an-existing-blockchain-network">Connect to an existing Blockchain network</a></li></ul></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="prerequisites"></a>Prerequisites<a class="hash-link" href="#prerequisites" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="docker--docker-compose"></a>Docker &amp; Docker Compose<a class="hash-link" href="#docker--docker-compose" title="Direct link to heading">#</a></h3><p>The whole deployment is based on Docker and Docker Compose, therefore you need to install <a href="https://www.docker.com/community-edition#/download" target="_blank" rel="noopener noreferrer">Docker</a> (version 20.10.7 or higher) and <a href="https://docs.docker.com/compose/install/" target="_blank" rel="noopener noreferrer">Docker Compose</a> (version 1.29.2 or higher).</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="ports-and-ip-addresses-for-trubudget"></a>Ports and IP Addresses for TruBudget<a class="hash-link" href="#ports-and-ip-addresses-for-trubudget" title="Direct link to heading">#</a></h3><p>Make sure that the following ports are not blocked by other processes: <code>3000</code>, <code>8080</code>, <code>8090</code>, <code>9000</code>, <code>8081</code>, <code>7447</code>, <code>7448</code>.
Also make sure that IPv4 subnet mask <code>172.21.0.0/24</code> is free to use on your computer.</p><p>If the subnet mask or some ports are already used by other proccesses or programs, you can easily change the port in the <code>.env</code> file that is located in <code>/scripts/operations/</code>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="verify-version-of-trubudget"></a>Verify version of TruBudget<a class="hash-link" href="#verify-version-of-trubudget" title="Direct link to heading">#</a></h3><p>Start with checking out the repository:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">git</span><span class="token plain"> clone https://github.com/openkfw/TruBudget</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">cd</span><span class="token plain"> TruBudget</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>This will create a local copy of the latest source code in a folder called <code>TruBudget</code> (= your local checkout).</p><p>If you work with an existing checkout, make sure you have the latest changes:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">git</span><span class="token plain"> checkout master</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">git</span><span class="token plain"> pull</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="clean-installation"></a>Clean installation<a class="hash-link" href="#clean-installation" title="Direct link to heading">#</a></h3><p>If you have previously started a TruBudget instance and want to start a new Blockchain network without previously stored data, remove the Docker volumes with:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">rm</span><span class="token plain"> -r /masterVolume</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">rm</span><span class="token plain"> -r /slave1Volume</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">rm</span><span class="token plain"> -r /minioVolume</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">rm</span><span class="token plain"> -r /emaildbVolume</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>If this is either your first time starting TruBudget or you want to resume where you left off, skip this step.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="create-a-new-blockchain-network"></a>Create a new Blockchain network<a class="hash-link" href="#create-a-new-blockchain-network" title="Direct link to heading">#</a></h2><p>Each Blockchain container comes with its own volume that persists the data of the Blockchain.
To modify the host path, meaning the path where the data will be persisted on your local machine (docker volume), you can change it in the docker-compose file <code>scripts/operation/docker-compose.yml</code>.</p><p>The next step is to set all required environment properties, otherwise Docker will not receive the required parameters to start the deployment.
If you want to start with the standard configuration we recommend copying the <code>.env_example</code> file and rename it to <code>.env</code> in the <code>TruBudget</code> base folder:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token builtin class-name" style="color:rgb(255, 203, 107)">cd</span><span class="token plain"> scripts/operation/</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">cp</span><span class="token plain"> .env_example .env</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>The <code>.env</code> in scripts/operation/ can be edited directly to fit your needs.</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>For detailed explenations of the environment variables, see the <a href="/docs/environment-variables">Environment Variables</a></p></div></div><p>To start the TruBudget in an easy way, use the bash script <code>start-trubudget.sh</code>.</p><p>If you want to start a setup with one blockain, frontend, API and provisioning (for test data), run:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token builtin class-name" style="color:rgb(255, 203, 107)">cd</span><span class="token plain"> scripts/operation/</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">bash</span><span class="token plain"> start-trubudget.sh --slim</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>If you want to add an additional blockchain node, email-notification-service, excel-export-service or storage-service, please take a look at the <a href="https://github.com/openkfw/TruBudget/blob/master/scripts/operation/README.md#trubudget-operation-setup" target="_blank" rel="noopener noreferrer">README.md of operation setup</a></p><p>The <strong>frontend</strong> should be accessible via port 3000 on the server that it is running on: http://localhost:3000/</p><p>The <strong>API Swagger documentation</strong> should be accessible via port 8080 on the server that it is running on: http://localhost:8080/api/documentation/static/index.html</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="connect-to-an-existing-blockchain-network"></a>Connect to an existing Blockchain network<a class="hash-link" href="#connect-to-an-existing-blockchain-network" title="Direct link to heading">#</a></h2><p>The docker-compose file in <code>scripts/operation/</code> comes with one additional blockchain node (slave-node) that trys to connect to the master node after starting.
Each Blockchain container comes with its own volume that persists the data of the Blockchain.</p><p>To start TruBudget with two organizations (master and slave), run:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">bash</span><span class="token plain"> start-trubudget.sh --slim --add-organization</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>This will create the blockchain, API and frontend for each of both organizations.
You can access the frontend of the slave-node with http://localhost:3005/ and the for the master-node with http://localhost:3000/. This is defined in the <code>docker-compose.yml</code> file.
The slave-node must be approved by the master-node. This can be done with the root user in the master frontend at the page http://localhost:3000/nodes.
The name of both organization and other configurations are defined in the <code>.env</code> file (in the directory <code>scripts/operation/</code>).</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>If you need more slave-nodes, you have to change the <code>docker-compose.yml</code> file and <code>start-trubudget.sh</code> in the directory <code>scripts/operation/</code> by yourself.</p></div></div></div><footer class="row docusaurus-mt-lg"><div class="col"><a href="https://github.com/facebook/docusaurus/edit/master/website/docs/operation-administration/installation/create-new-network/create-new-docker-compose.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_mS5F" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_wj+Z">Last updated on <b><time datetime="2022-03-03T08:37:48.000Z">3/3/2022</time></b> by <b>Stefan Ziffer</b></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/operation-administration/installation/create-new-network/bare-metal"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Create a New Network Directly on Machine</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/operation-administration/encryption"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Securing communication between nodes Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#table-of-contents" class="table-of-contents__link">Table of Contents</a></li><li><a href="#prerequisites" class="table-of-contents__link">Prerequisites</a><ul><li><a href="#docker--docker-compose" class="table-of-contents__link">Docker &amp; Docker Compose</a></li><li><a href="#ports-and-ip-addresses-for-trubudget" class="table-of-contents__link">Ports and IP Addresses for TruBudget</a></li><li><a href="#verify-version-of-trubudget" class="table-of-contents__link">Verify version of TruBudget</a></li><li><a href="#clean-installation" class="table-of-contents__link">Clean installation</a></li></ul></li><li><a href="#create-a-new-blockchain-network" class="table-of-contents__link">Create a new Blockchain network</a></li><li><a href="#connect-to-an-existing-blockchain-network" class="table-of-contents__link">Connect to an existing Blockchain network</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/README">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/openkfw/TruBudget/discussions" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Github Discussions<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/openkfw/TruBudget" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://taas.trubudget.net" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>TruBudget as a Service<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2022 TruBudget</div></div></div></footer></div>
<script src="/assets/js/runtime~main.9f9b21c1.js"></script>
<script src="/assets/js/main.be69de2d.js"></script>
</body>
</html>