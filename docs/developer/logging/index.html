<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.3">
<link rel="search" type="application/opensearchdescription+xml" title="TruBudget" href="/trubudget-website/opensearch.xml"><title data-react-helmet="true">Loging | TruBudget</title><meta data-react-helmet="true" property="og:url" content="https://openkfw.github.io/trubudget-website//trubudget-website/docs/developer/logging"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Loging | TruBudget"><link data-react-helmet="true" rel="shortcut icon" href="/trubudget-website/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://openkfw.github.io/trubudget-website//trubudget-website/docs/developer/logging"><link data-react-helmet="true" rel="alternate" href="https://openkfw.github.io/trubudget-website//trubudget-website/docs/developer/logging" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://openkfw.github.io/trubudget-website//trubudget-website/docs/developer/logging" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://asdas-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/trubudget-website/assets/css/styles.fe657d06.css">
<link rel="preload" href="/trubudget-website/assets/js/runtime~main.64db6aa8.js" as="script">
<link rel="preload" href="/trubudget-website/assets/js/main.ba772e2d.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/trubudget-website/"><b class="navbar__title">TruBudget</b></a><a class="navbar__item navbar__link navbar__link--active" href="/trubudget-website/docs/README">Documentation</a><a href="https://github.com/openkfw/TruBudget/discussions" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Community<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/openkfw/TruBudget" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle displayOnlyInLargeViewport_GrZ2 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><div class="searchBox_1Doo"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/trubudget-website/"><b class="navbar__title">TruBudget</b></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link navbar__link--active" href="/trubudget-website/docs/README">Documentation</a></li><li class="menu__list-item"><a href="https://github.com/openkfw/TruBudget/discussions" target="_blank" rel="noopener noreferrer" class="menu__link"><span>Community<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="menu__list-item"><a href="https://github.com/openkfw/TruBudget" target="_blank" rel="noopener noreferrer" class="menu__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu menu--responsive thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA" aria-label="Sidebar navigation"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/trubudget-website/docs/README">Getting Started</a></li><li class="menu__list-item"><a class="menu__link" href="/trubudget-website/docs/usecases">Example Use Cases</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Developer</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/trubudget-website/docs/developer/introduction">Contributing to TruBudget</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/trubudget-website/docs/developer/developer-setup">Setup</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Architecture</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/trubudget-website/docs/developer/architecture/intro">Architecture Decision Records</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/trubudget-website/docs/developer/architecture/record-architecture-decisions">Record architecture decisions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/trubudget-website/docs/developer/architecture/access-control-model">Access Control Model</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/trubudget-website/docs/developer/architecture/project-data-model">Data model for projects</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/trubudget-website/docs/developer/architecture/ressource-level-lifetime">Resource-level lifetime</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/trubudget-website/docs/developer/architecture/workflowitem-ordering">Workflowitem-ordering</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/trubudget-website/docs/developer/architecture/multi-node-setup">Multi-node setup</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/trubudget-website/docs/developer/architecture/execution-architecture-overview">Basic architecture overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/trubudget-website/docs/developer/architecture/git-branching-model">Git Branching Model</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/trubudget-website/docs/developer/architecture/migration-model">Migration Model</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/trubudget-website/docs/developer/architecture/multi-node-setup-and-user-management">Multi node setup and user management</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/trubudget-website/docs/developer/architecture/decline-node">Decline Node Request</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/trubudget-website/docs/developer/architecture/node-connection-info">Node Status</a></li></ul></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/trubudget-website/docs/developer/logging">Loging</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Operation / Administration</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/trubudget-website/docs/operation-administration/introduction">Introduction and Basics</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/trubudget-website/docs/operation-administration/security">Security @ TruBudget</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="-1">Installation</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/trubudget-website/docs/operation-administration/installation/README">Introduction</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="-1">Connect to an existing network</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/trubudget-website/docs/operation-administration/installation/connect-to-existing-node/bare-metal">Connect to an Existing Network on Bare Metal</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/trubudget-website/docs/operation-administration/installation/connect-to-existing-node/connect-docker-compose">Connect to an Existing Network using Docker</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="-1">Create a new network</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/trubudget-website/docs/operation-administration/installation/create-new-network/bare-metal">Create a New Network Directly on Machine</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/trubudget-website/docs/operation-administration/installation/create-new-network/create-new-docker-compose">Create a New Network with Docker-Compose</a></li></ul></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/trubudget-website/docs/operation-administration/encryption">Securing communication between nodes</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/trubudget-website/docs/operation-administration/logging">Logging</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/trubudget-website/docs/operation-administration/multichain-cli">Multichain-Cli</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/trubudget-website/docs/operation-administration/update-trubudget">Updateing TruBudget</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">User-Guide</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/trubudget-website/docs/user-guide/README">Introduction</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="-1">User and groups</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/trubudget-website/docs/user-guide/users-and-groups/user">User</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/trubudget-website/docs/user-guide/users-and-groups/group">Group</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/trubudget-website/docs/user-guide/users-and-groups/permissions">Permissions</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="-1">Project</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/trubudget-website/docs/user-guide/projects/project">Project</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/trubudget-website/docs/user-guide/projects/subproject">Subproject</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/trubudget-website/docs/user-guide/projects/workflowitem">Workflowitems</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="-1">Network</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/trubudget-website/docs/user-guide/network/nodes">Nodes</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="-1">Status</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/trubudget-website/docs/user-guide/status/status">Service-Status</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/trubudget-website/docs/user-guide/backup">Backup</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/trubudget-website/docs/user-guide/confirmation">Confirmation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/trubudget-website/docs/user-guide/excel-export">Excel Export</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/trubudget-website/docs/user-guide/notifications">Notifications</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Known Issues</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/trubudget-website/docs/known-issues/intro">Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/trubudget-website/docs/known-issues/local">Errors during Local Installation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/trubudget-website/docs/known-issues/dev">Issues during Developer Setup</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="/trubudget-website/docs/enviroment-variables">Environment Variables</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="markdown"><header><h1 class="h1Heading_27L5">Loging</h1></header><header><h1 class="h1Heading_27L5">Logging</h1></header><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="api-log"></a>API Log<a class="hash-link" href="#api-log" title="Direct link to heading">#</a></h2><p>The API is the central part of the TruBudget application. It handles the requests from the frontend and manages the data that is written to the blockchain. Therefore logging is a cruicial part of the API&#x27;s operation, so that the administrator is informed of where and when errors occur.</p><p>TruBudget can be installed in 3 possible flavors:</p><ul><li>Bare Metal - All componends (Node.js, Multichain, nginx, etc.) are installed directly onto the machine that will be running the application</li><li>Docker-Compose - All parts of the application are available as docker images, so they are pulled from a registry and started by docker on the host machine</li><li>Kubernetes - The containers with the different parts of the application are managed and orchestrated by Kubernetes</li></ul><p>The API logs are printed to the standard output (STDOUT and STDERR) by default. This way the application does not need to worry about file paths, log rotation and other operations topics. We have compiled a list of recomended practices for handling the logs for each installation type.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="bare-metal"></a>Bare metal<a class="hash-link" href="#bare-metal" title="Direct link to heading">#</a></h3><p>As stated above, the API logs are printed to STDOUT/STDERR, which means that they are just displayed to the console. We therefore need an application that can take care of the node process and re-route the logs for us. Luckily, there are several applications that are capable of doing exactly that. One of them is PM2, which we will describe here shortly.</p><p>PM2 is an application that handles node processes for you and restarts it after a crash. PM2 can be installed via the following command</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">npm</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">install</span><span class="token plain"> -g pm2</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>It offers a wide range of plugins called &quot;Modules&quot; that can be installed via PM2 directly. One of these modules is called &quot;pm2-logrotate&quot; which can be used to rotate logs (e.g. split them into chunks of certain size or create separate files for each day) and the command to install it is simply</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">pm2 </span><span class="token function" style="color:rgb(130, 170, 255)">install</span><span class="token plain"> pm2-logrotate</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>After <a href="https://github.com/keymetrics/pm2-logrotate" target="_blank" rel="noopener noreferrer">setting up</a> pm2-logrotate (if needed) you can run the api with pm2</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token builtin class-name" style="color:rgb(255, 203, 107)">cd</span><span class="token plain"> api</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">pm2 start dist/index.js</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>This is just an example. Please refer to the <a href="http://pm2.keymetrics.io/" target="_blank" rel="noopener noreferrer">official documentation</a> for more information.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="docker-compose"></a>Docker-Compose<a class="hash-link" href="#docker-compose" title="Direct link to heading">#</a></h3><p>When choosing the Docker-Compose setup, all messages that are printed to STDOUT/STDERR are available via the <code>docker logs</code> command. On UNIX systems, the logs are available on <code>/var/lib/docker/containers/[container-id]/[container-id]-json.log</code> and can be processed with applications like Logrotate.</p><p>Another possibility is to use the EFK stack which will be described below.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="kubernetes"></a>Kubernetes<a class="hash-link" href="#kubernetes" title="Direct link to heading">#</a></h3><p>When operating the application via Kubernetes it is recommended to use the EFK stack, which will be described in more detail below.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="the-efk-stack"></a>The EFK stack<a class="hash-link" href="#the-efk-stack" title="Direct link to heading">#</a></h2><p>The EFK stack consists of the following components:</p><ul><li>Elasticsearch - A backend for indexing and persisting data</li><li>Fluentd/Fluentbit - An aggregator for log files</li><li>Kibana - A frontend to visualize logs and work with them</li></ul><p>The EFK stack is a powerful set of software that enables advanced administration of log information. The logs are aggregated from all sources via Fluentd or Fluent Bit, sent to Elasticsearch and can then be viewed in Kibana. Fluentd and Fluent Bit are similar applications that perform similar tasks, but Fluentd is more versatile and heavyweight whereas Fluent Bit is lightweight and not as rich in functionalities.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="efk--docker-compose"></a>EFK &amp; Docker-Compose<a class="hash-link" href="#efk--docker-compose" title="Direct link to heading">#</a></h3><p>In the Docker-Compose setup, we have mainly two different options of getting the logs of the containers:</p><ol><li>Use the &quot;Tail&quot; input plugin and select the path of the docker logs as input</li><li>Use the &quot;Fluentd&quot; log plugin that is built into Docker that automatically posts the log entries to the TCP port 24224 and then use the input plugin &quot;Forward&quot; to connect to the port 24224 and receive the log messages.</li></ol><p>Elasticsearch and Kibana can then be installed in Docker containers or locally.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="efk-and-kubernetes"></a>EFK and Kubernetes<a class="hash-link" href="#efk-and-kubernetes" title="Direct link to heading">#</a></h3><p>The Helm chart for Kubernetes can be configured such that a Fluent Bit pod is created on every node (see the reference architecture). The Fluent Bit pod then gathers all logs from the other pods on the node, adds some Kubernetes meta data (like pod names, cluster name, etc.) and sends it to a defined destination. In the reference architecture this destination is Fluentd, but if no further processing is required, the log data can be sent to Elasticsearch directly.
<img alt="Reference Architecture EFK stack" src="/trubudget-website/assets/images/fluentd_architecture-fe14b59248cb9f6c0052b98fae8cc35a.png"></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="logging-guidelines-and-information"></a>Logging Guidelines and information<a class="hash-link" href="#logging-guidelines-and-information" title="Direct link to heading">#</a></h2><p>This section contains guidelines and standards regarding logging and should be expanded as the application matures.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="logger---pino"></a>Logger - Pino<a class="hash-link" href="#logger---pino" title="Direct link to heading">#</a></h3><p>The logger used in the application is called &quot;Pino&quot; and you can find the documentation <a href="https://github.com/pinojs/pino" target="_blank" rel="noopener noreferrer">here</a>. Why was Pino used instead of Winston? The reason is that Pino is compatible with Fastify, whereas Winston is not (at least not out of the box).</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="logging---format"></a>Logging - format<a class="hash-link" href="#logging---format" title="Direct link to heading">#</a></h3><p>Pino supports several log levels (from <code>trace</code> to <code>fatal</code>). To make sure that the relevant information is in place, each log entry should include an object containing meta data if possible.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="error"></a>Error<a class="hash-link" href="#error" title="Direct link to heading">#</a></h4><p>The call of the &quot;error&quot; level should always contain data of the situation as an &quot;error&quot; object. Example:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">logger.error</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> error: err </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain">, </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Stream not found.&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>where <code>err</code> is the object containing information on the root cause of the error.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="environment-variables"></a>Environment variables<a class="hash-link" href="#environment-variables" title="Direct link to heading">#</a></h3><p>There are two settings of the Pino logger that are set via environment variables.</p><ul><li>Set <code>PRETTY_PRINT</code> to &quot;false&quot; to disable pretty printing</li><li>Set the log level via <code>LOG_LEVEL</code>. The possible values are: &quot;trace&quot;, &quot;debug&quot;, &quot;info&quot;, &quot;warn&quot;, &quot;error&quot; and &quot;fatal&quot;.</li></ul></div><footer class="row docusaurus-mt-lg"><div class="col"><a href="https://github.com/facebook/docusaurus/edit/master/website/docs/developer/logging.mdx" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_3DPF">Last updated on <b><time datetime="2021-07-09T09:27:32.000Z">7/9/2021</time></b> by <b>mayrmartin</b></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/trubudget-website/docs/developer/architecture/node-connection-info"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Node Status</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/trubudget-website/docs/operation-administration/introduction"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Introduction and Basics Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/trubudget-website/docs/README">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/openkfw/TruBudget/discussions" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Github Discussions<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/openkfw/TruBudget" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 TruBudget</div></div></div></footer></div>
<script src="/trubudget-website/assets/js/runtime~main.64db6aa8.js"></script>
<script src="/trubudget-website/assets/js/main.ba772e2d.js"></script>
</body>
</html>